services:
  playwright-mcp-vnc:
    image: ghcr.io/matthewdart/playwright-mcp-vnc:latest
    container_name: playwright-mcp-vnc
    restart: unless-stopped
    network_mode: host
    ipc: host  # required for Chromium sandboxing
    environment:
      - SCREEN_WIDTH=1280
      - SCREEN_HEIGHT=720
      - SCREEN_DEPTH=24
    labels:
      mcp.enabled: "true"
      mcp.namespace: "playwright"
      mcp.transport: "http"
      mcp.description: "Browser automation via Playwright MCP with headed Chromium. Supports interactive authentication via noVNC on port 6080."
      # Explicit URL required: host networking means container name
      # is not DNS-resolvable, and Playwright MCP uses /sse not /mcp
      mcp.url: "http://localhost:8931/sse"
    volumes:
      - playwright-data:/home/pwuser/.config/chromium
    deploy:
      resources:
        limits:
          memory: 2g
          cpus: "2.0"
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"

volumes:
  playwright-data:
